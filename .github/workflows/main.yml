name: NCP 3-Tier CI/CD Pipeline (Self-Hosted)

on:
  push:
    branches: [ "main" ]

jobs:
  deploy:
    runs-on: self-hosted # <--- 우분투 알바생 해고! 우리 집 전용 로봇 호출!

    steps:
    - name: WAS 서버 내부에서 직접 배포 스크립트 실행
      run: |
        cd /root/my-board-server
        git pull origin main
        npm install
        pm2 restart server.js
